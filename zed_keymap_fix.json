[
  // Global shortcuts that work in all modes
  {
    "context": "Workspace",
    "bindings": {
      // File operations
      "cmd-n": "workspace::NewFile",
      "cmd-o": "workspace::Open",
      "cmd-s": "workspace::Save",
      "cmd-shift-s": "workspace::SaveAs",
      "cmd-w": "pane::CloseActiveItem",
      "cmd-shift-w": "workspace::CloseWindow",

      // App operations
      "cmd-q": "zed::Quit",
      "cmd-,": "zed::OpenSettings",

      // Zoom
      "cmd-=": ["workspace::SendKeystrokes", "cmd-+ persist"],
      "cmd-+": ["workspace::SendKeystrokes", "cmd-+ persist"],
      "cmd--": ["workspace::SendKeystrokes", "cmd-- persist"],
      "cmd-0": ["workspace::SendKeystrokes", "cmd-0 persist"]
    }
  },

  // VSCode-style keybindings (only when vim mode is OFF)
  {
    "context": "Editor && !vim_mode",
    "bindings": {
      // Navigation
      "ctrl-g": "go_to_line::Toggle",
      "cmd-p": "file_finder::Toggle",
      "cmd-shift-p": "command_palette::Toggle",
      "cmd-shift-f": "project_search::ToggleFocus",
      "cmd-f": "buffer_search::Deploy",
      "cmd-shift-o": "outline::Toggle",

      // Editing
      "cmd-d": "editor::SelectNext",
      "cmd-shift-l": "editor::SelectAllMatches",
      "cmd-u": "editor::UndoSelection",
      "cmd-shift-k": "editor::DeleteLine",
      "alt-up": "editor::MoveLineUp",
      "alt-down": "editor::MoveLineDown",
      "alt-shift-up": "editor::AddSelectionAbove",
      "alt-shift-down": "editor::AddSelectionBelow",

      // Code actions
      "cmd-shift-i": "editor::Format",
      "cmd-.": "editor::ToggleCodeActions",
      "f2": "editor::Rename",
      "f12": "editor::GoToDefinition",
      "alt-f12": "editor::GoToReferences",

      // Panel toggles
      "cmd-b": "workspace::ToggleLeftDock",
      "cmd-j": "workspace::ToggleBottomDock",
      "ctrl-`": "terminal_panel::ToggleFocus",

      // Split/pane navigation (VSCode style)
      "cmd-\\": "workspace::SplitRight",
      "cmd-k cmd-\\": "workspace::SplitDown",
      "cmd-w": "pane::CloseActiveItem",
      "cmd-1": ["workspace::ActivatePane", 0],
      "cmd-2": ["workspace::ActivatePane", 1],
      "cmd-3": ["workspace::ActivatePane", 2],

      // Comments
      "cmd-/": "editor::ToggleComments"
    }
  },

  // Vim mode keybindings (only when vim mode is ON)
  {
    "context": "vim_mode && VimControl && !VimWaiting && !menu",
    "bindings": {
      // Pane navigation with Ctrl+hjkl (vim/tmux style)
      "ctrl-h": "workspace::ActivatePaneLeft",
      "ctrl-j": "workspace::ActivatePaneDown",
      "ctrl-k": "workspace::ActivatePaneUp",
      "ctrl-l": "workspace::ActivatePaneRight",

      // Leader key bindings with Space
      "space e": "project_panel::ToggleFocus",
      "space f": "file_finder::Toggle",
      "space g": "project_search::ToggleFocus",
      "space b": "tab_switcher::Toggle",
      "space t": "terminal_panel::ToggleFocus",
      "space w": "workspace::Save",
      "space q": "pane::CloseActiveItem",
      "space p": "command_palette::Toggle",
      "space o": "outline::Toggle",

      // Vim-specific overrides
      "ctrl-d": "vim::ScrollDown",
      "ctrl-u": "vim::ScrollUp",
      "ctrl-f": "vim::PageDown",
      "ctrl-b": "vim::PageUp"
    }
  },

  // Vim Insert mode
  {
    "context": "vim_mode && VimInsert",
    "bindings": {
      "escape": "vim::NormalMode",
      "ctrl-[": "vim::NormalMode",
      "ctrl-c": "vim::NormalMode"
    }
  },

  // Vim Visual mode
  {
    "context": "vim_mode && VimVisual",
    "bindings": {
      "escape": "vim::NormalMode",
      ">": "vim::Indent",
      "<": "vim::Outdent"
    }
  },

  // Editor keybindings for non-vim mode only
  {
    "context": "Editor && !vim_mode",
    "bindings": {
      // Standard editor shortcuts
      "ctrl-a": "editor::SelectAll",
      "cmd-a": "editor::SelectAll",
      "cmd-z": "editor::Undo",
      "cmd-shift-z": "editor::Redo",
      "cmd-x": "editor::Cut",
      "cmd-c": "editor::Copy",
      "cmd-v": "editor::Paste",

      // Navigation
      "cmd-left": "editor::MoveToBeginningOfLine",
      "cmd-right": "editor::MoveToEndOfLine",
      "cmd-up": "editor::MoveToBeginning",
      "cmd-down": "editor::MoveToEnd",
      "alt-left": "editor::MoveToPreviousWordStart",
      "alt-right": "editor::MoveToNextWordEnd",

      // Selection
      "cmd-shift-left": "editor::SelectToBeginningOfLine",
      "cmd-shift-right": "editor::SelectToEndOfLine",
      "cmd-shift-up": "editor::SelectToBeginning",
      "cmd-shift-down": "editor::SelectToEnd",
      "alt-shift-left": "editor::SelectToPreviousWordStart",
      "alt-shift-right": "editor::SelectToNextWordEnd",

      // Standard backspace behavior (not vim)
      "ctrl-h": "editor::Backspace",
      "backspace": "editor::Backspace"
    }
  },

  // Search panel
  {
    "context": "ProjectSearchBar",
    "bindings": {
      "escape": "project_search::ToggleFocus",
      "cmd-f": "search::FocusEditor",
      "enter": "search::ActivateRegex"
    }
  },

  // File finder
  {
    "context": "FileFinder",
    "bindings": {
      "escape": "file_finder::Toggle",
      "cmd-p": "file_finder::Toggle"
    }
  },

  // Command palette
  {
    "context": "CommandPalette",
    "bindings": {
      "escape": "command_palette::Toggle",
      "cmd-shift-p": "command_palette::Toggle"
    }
  },

  // Terminal
  {
    "context": "Terminal",
    "bindings": {
      "ctrl-`": "terminal_panel::ToggleFocus",
      "cmd-w": "terminal_panel::ToggleFocus"
    }
  }
]
